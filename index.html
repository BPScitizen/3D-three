<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시바!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="wrap">
        <h1>둘러보개</h1>
        <div id="container">
            <article id="card" class="card">
                <h2>Shiba!</h2>
                <canvas id="canvas" width="300" height="300"></canvas>   
            </article>
            <article id="card2" class="card">
                <h2>Pink!</h2>
                <canvas id="canvas2" width="300" height="300"></canvas>   
            </article>
            <article id="card3" class="card">
                <h2>harvest!</h2>
                <canvas id="canvas3" width="300" height="300"></canvas>   
            </article>
        </div>
        
        

    </div>
    <script type="importmap">

        {
            "imports": {
              "three": "https://unpkg.com/three@0.149.0/build/three.module.js",
              "GLTFLoader" : "https://unpkg.com/three@0.149.0/examples/jsm/loaders/GLTFLoader.js",
              "OrbitControls" : "https://unpkg.com/three@0.149.0/examples/jsm/controls/OrbitControls.js "
            }
          }
    </script>
     

    <script type="module">
        import { GLTFLoader } from 'GLTFLoader';
        import * as THREE from 'three';
        import { OrbitControls } from 'OrbitControls'

        // 시바 소환

        let scene = new THREE.Scene();

        let renderer = new THREE.WebGLRenderer({
            canvas : document.querySelector('#canvas'),
            antialias : true
        });

        const card = document.querySelector('#card')
        // OrbitControls
        renderer.setSize(300, 300);
        card.appendChild( renderer.domElement );

        renderer.outputEncoding = THREE.sRGBEncoding;

        let camera = new THREE.PerspectiveCamera(20, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0,0,10)

        scene.background = new THREE.Color('white');
        let light = new THREE.DirectionalLight(0xffff00, 10);
        scene.add(light);

        let controls = new OrbitControls( camera, renderer.domElement);

        let loader = new GLTFLoader();
        loader.load('shiba/scene.gltf', function(gltf) {
            console.log(gltf);
            scene.add(gltf.scene);
            renderer.render(scene, camera);
            function animate() {
                requestAnimationFrame(animate)
                gltf.scene.rotation.y -= 0.01
                renderer.render(scene, camera);
            }
            animate()
        });

        // 핑크 강아지 소환

        let scene2 = new THREE.Scene();
        scene2.background = new THREE.Color('white');
        scene2.add(light);

        let light2 = new THREE.DirectionalLight(0xffff00, 10);

        let renderer2 = new THREE.WebGLRenderer({
            canvas : document.querySelector('#canvas2'),
            antialias : true
        });

        const card2 = document.querySelector('#card2')
        // OrbitControls
        renderer2.setSize(300, 300);
        card2.appendChild( renderer2.domElement );


        renderer2.outputEncoding = THREE.sRGBEncoding;

        let camera2 = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera2.position.set(0,-1,1)

        let controls2 = new OrbitControls( camera2, renderer2.domElement);

        let loader2 = new GLTFLoader();
        loader2.load('pink_dog/scene.gltf', function(gltf) {
            scene2.add(gltf.scene);
            renderer2.render(scene2, camera2);
            function animate() {
                requestAnimationFrame(animate)
                // gltf.scene.rotation.y -= 0.01
                // gltf.scene.rotation.x += 0.01
                renderer2.render(scene2, camera2);
            }
            animate()
        });

        // 하비스트 문 소환
        
        let scene3 = new THREE.Scene();
        scene3.background = new THREE.Color('white');
        scene3.add(light);

        let light3 = new THREE.DirectionalLight(0xffff00, 10);

        let renderer3 = new THREE.WebGLRenderer({
            canvas : document.querySelector('#canvas3'),
            antialias : true
        });

        const card3 = document.querySelector('#card3')
        // OrbitControls
        renderer3.setSize(300, 300);
        card3.appendChild( renderer3.domElement );


        renderer3.outputEncoding = THREE.sRGBEncoding;

        let camera3 = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera3.position.set(0,0,10)

        let controls3 = new OrbitControls( camera3, renderer3.domElement);

        let loader3 = new GLTFLoader();
        loader3.load('harvest2/scene.gltf', function(gltf) {
            scene3.add(gltf.scene);
            renderer3.render(scene2, camera2);
            function animate() {
                requestAnimationFrame(animate)
                gltf.scene.rotation.y -= 0.01
                // gltf.scene.rotation.x += 0.01
                renderer3.render(scene3, camera3);
            }
            animate()
        });
         
    </script>
</body>
</html>